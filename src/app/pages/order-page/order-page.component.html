<div class="order-container">
  <!-- Sidebar for categories -->
  <app-category-sidebar
    [categories]="(restaurantData$ | async)?.data ?? []"
    (categorySelected)="selectCategory($event)"
  >
  </app-category-sidebar>

  <!-- Main content area -->
  <div class="menu-content">
    <!-- <h1 class="order-title">{{ (restaurantData$ | async)?.title }}</h1> -->
    <!-- ‚úÖ CART ICON ON TOP-RIGHT -->
    <div class="cart" (click)="toggleCart()">
      üõí Cart: {{ getTotalPrice() }} CHF
    </div>

    <!-- ‚úÖ DISPLAY CART ITEMS -->
    @if (cart.length > 0) {
    <div class="cart-dropdown">
      <h3>Cart</h3>
      <ul>
        @for (item of cart; track item.uuid) {
        <li>
          {{ item.title }} - {{ item.price / 100 }} CHF
          <button (click)="removeFromCart(item, $event)">‚ùå</button>
        </li>
        }
      </ul>
    </div>
    } @let restaurantData = (restaurantData$ | async); @if (restaurantData) {
    @for (category of restaurantData.data; track category.uuid) { @if
    (!selectedCategoryUuid || selectedCategoryUuid === category.uuid) {
    <div class="category">
      <h2>{{ category.title }}</h2>
      <div class="recipe-list">
        @for (recipe of category.recipes; track recipe.uuid) {
        <div class="recipe-card" (click)="toggleDetails(recipe.uuid)">
          <img
            [src]="recipe.imageUrl || 'assets/no-image.svg'"
            [alt]="recipe.title"
            class="product-img"
          />
          <h3>{{ recipe.title }}</h3>

          <!-- Product details are shown only if selected -->
          @if (selectedProduct === recipe.uuid){
          <div class="recipe-details">
            <p>{{ recipe.description }}</p>
            <p class="price">{{ recipe.price / 100 }} CHF</p>
            <button (click)="addToCart(recipe, $event)">Add to Cart</button>
            <button (click)="closeDetails($event)">Cancel</button>
          </div>
          }
        </div>
        }
      </div>
    </div>
    } } } @else {
    <p>Loading...</p>
    }
  </div>
</div>
