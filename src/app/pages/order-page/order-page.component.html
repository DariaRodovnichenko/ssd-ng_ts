<!-- âœ… WRAP CATEGORIES & PRODUCTS CORRECTLY -->
<div class="order-container">
  <app-category-sidebar
    [categories]="(restaurantData$ | async)?.data ?? []"
    (categorySelected)="selectCategory($event)">
  </app-category-sidebar>

  <div class="menu-content">
    <a class="cart" routerLink='/cart'>
      ðŸ›’ Cart: {{ orderService.getTotalPrice() }} CHF
    </a>

    <!-- âœ… DISPLAY CATEGORIES PROPERLY -->
    @let restaurantData = (restaurantData$ | async);
    @if (restaurantData) {
      <div class="category-list">  <!-- âœ… New Wrapper for All Categories -->
        @for (category of restaurantData.data; track category.uuid) {
          @if (!selectedCategoryUuid || selectedCategoryUuid === category.uuid) {
            <div class="category">
              <h2>{{ category.title }}</h2>
              <div class="recipe-list">
                @for (recipe of category.recipes; track recipe.uuid) {
                  <div class="recipe-card" (click)="toggleDetails(recipe.uuid)">
                    <img [src]="recipe.imageUrl || 'assets/no-image.svg'"
                        [alt]="recipe.title" class="product-img">
                    <h3>{{ recipe.title }}</h3>

                    @if (selectedProduct === recipe.uuid) {
                      <div class="recipe-details">
                        <p>{{ recipe.description }}</p>
                        <p class="price">{{ recipe.price / 100 }} CHF</p>
                        <button (click)="orderService.addToCart(recipe)">Add to Cart</button>
                        <button (click)="closeDetails($event)">Cancel</button>
                      </div>
                    }
                  </div>
                }
              </div>
            </div>
          }
        }
      </div>
    } @else {
      <p>Loading...</p>
    }
  </div>
</div>
